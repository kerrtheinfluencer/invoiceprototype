
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Seller Tracker</title>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <link rel="stylesheet" href="styles.css" />

</head>
<body>

<div class="container">
  <header>
    <h1>Seller Tracker</h1>
    <p class="intro">Quick sales entry • PDF receipts with your branding • CSV export</p>
    <button class="menu-btn" onclick="document.getElementById('businessSettings').style.display='flex'">
      ⚙️ Business Settings
    </button>
  </header>

  <div class="card">
    <h2>New Sale</h2>

    <form id="orderForm">
      <label>Customer Name *</label>
      <input type="text" id="customerName" required oninput="this.value = this.value.replace(/\b\w/g, l => l.toUpperCase())">

      <label>Phone / WhatsApp *</label>
      <div class="phone-wrapper">
        <span id="customerPhonePrefix" class="phone-prefix">+1-876-</span>
        <input type="tel" id="customerPhone" class="phone-input" required placeholder="XXX-XXXX" maxlength="8">
      </div>

      <label>Platform</label>
      <select id="platform">
        <option>Instagram</option>
        <option>WhatsApp</option>
        <option>Facebook</option>
        <option>TikTok</option>
        <option>Other</option>
      </select>

      <h3>Items</h3>
      <div id="items-container" class="items-section"></div>
      <button type="button" onclick="addItemRow()" class="add-item-btn">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
          <line x1="12" y1="5" x2="12" y2="19"></line>
          <line x1="5" y1="12" x2="19" y2="12"></line>
        </svg>
        Add Item
      </button>

      <label>Delivery Fee (JMD)</label>
      <input type="number" id="deliveryFee" value="0" min="0" step="0.01">

      <div id="summary">Subtotal: J$0.00 | Total: J$0.00</div>

      <label>Notes / Delivery Info</label>
      <textarea id="notes" rows="3" placeholder="e.g. Deliver to Portmore - J$500 fee"></textarea>

      <label>Payment Status</label>
      <select id="paymentStatus">
        <option>Pending</option>
        <option>Partial</option>
        <option>Paid - Cash</option>
        <option>Paid - Transfer</option>
        <option>Paid - Card</option>
      </select>

      <button type="submit" class="save-order-btn" id="saveOrderBtn">Save Order</button>
      <button type="button" id="cancelEditBtn" class="cancel-edit-btn hidden">Cancel Edit</button>

      <div id="feedback" class="feedback"></div>
    </form>
  </div>

  <div class="card">
    <h2>Saved Orders</h2>
    <p id="totalRevenue" class="total-revenue">Total Revenue: J$0.00 | Orders: 0</p>

    <div class="stats-grid">
      <div class="stat-card">
        <span>Today’s Revenue</span>
        <strong id="todayRevenue">J$0.00</strong>
      </div>
      <div class="stat-card">
        <span>Pending Payments</span>
        <strong id="pendingPayments">0</strong>
      </div>
      <div class="stat-card">
        <span>Top Platform</span>
        <strong id="topPlatform">—</strong>
      </div>
    </div>

    <div class="tools-row">
      <input type="text" id="searchOrders" placeholder="Search by customer, phone, platform, item..." class="search-input">
      <select id="dateFilter" class="date-filter">
        <option value="all">All Dates</option>
        <option value="today">Today</option>
        <option value="week">Last 7 Days</option>
        <option value="month">Last 30 Days</option>
      </select>
      <button onclick="exportCSV()" class="export-btn">Export All to CSV</button>
    </div>

    <div id="orders-list" class="orders-list"></div>
  </div>
</div>

<div id="confirmModal" class="confirm-modal" aria-hidden="true">
  <div class="confirm-card">
    <h3>Confirm Delete</h3>
    <p id="confirmMessage">Are you sure you want to delete this order?</p>
    <div class="confirm-actions">
      <button id="cancelDeleteBtn" type="button" class="cancel-btn">Cancel</button>
      <button id="confirmDeleteBtn" type="button" class="danger-btn">Delete Order</button>
    </div>
  </div>
</div>

<!-- Business Settings Modal -->
<div id="businessSettings">
  <div id="businessForm">
    <h2>Business Information</h2>
    <p class="settings-hint">This appears on every receipt PDF</p>

    <label>Business Name</label>
    <input type="text" id="bizName" placeholder="Your Business Name">

    <label>Business Email</label>
    <input type="email" id="bizEmail" placeholder="business@example.com">

    <label>Business Social Handle (without @)</label>
    <input type="text" id="bizSocial" placeholder="yourhandle">

    <label>Social Platform</label>
    <select id="bizSocialPlatform">
      <option value="">Select platform</option>
      <option>Instagram</option>
      <option>TikTok</option>
      <option>X / Twitter</option>
      <option>Facebook</option>
      <option>Other</option>
    </select>

    <label>WhatsApp / Contact Area Code</label>
    <input type="text" id="bizAreaCode" placeholder="+1-876-" value="+1-876-">

    <label>WhatsApp / Contact (digits only)</label>
    <div class="phone-wrapper">
      <span id="bizPhonePrefix" class="phone-prefix">+1-876-</span>
      <input type="tel" id="bizPhone" class="phone-input" placeholder="XXX-XXXX" maxlength="8">
    </div>

    <label>Upload Logo (PNG/JPG)</label>
    <input type="file" id="bizLogoUpload" accept="image/*">
    <img id="logoPreview" src="" alt="Logo Preview">

    <label>Extra Receipt Note / Recommendation</label>
    <textarea id="bizNote" rows="2" placeholder="Thank you for your order!"></textarea>

    <button class="btn" onclick="saveBusinessInfo()">Save Business Info</button>
    <button id="closeSettings" class="btn" onclick="document.getElementById('businessSettings').style.display='none'">Close</button>
  </div>
</div>

  <script src="app.js"></script>

</body>
</html>
