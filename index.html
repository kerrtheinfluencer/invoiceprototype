<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Seller Tracker</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="app-shell">
    <header class="app-header">
      <div>
        <h1>Seller Tracker</h1>
        <p>Fast sales capture, branded receipts, and simple order management.</p>
      </div>
      <button class="btn btn-secondary" id="openBusinessSettings" type="button">⚙ Business Settings</button>
    </header>

    <main class="layout-grid">
      <section class="panel panel-form">
        <h2>New / Edit Sale</h2>
        <form id="orderForm" novalidate>
          <div class="form-row">
            <label for="customerName">Customer Name *</label>
            <input id="customerName" type="text" required />
          </div>

          <div class="form-row">
            <label for="customerPhone">Phone / WhatsApp *</label>
            <div class="phone-field">
              <span id="customerPhonePrefix" class="prefix">+1-876-</span>
              <input id="customerPhone" type="tel" class="with-prefix" maxlength="8" placeholder="XXX-XXXX" required />
            </div>
          </div>

          <div class="form-row two-col">
            <div>
              <label for="platform">Platform</label>
              <select id="platform">
                <option>Instagram</option>
                <option>WhatsApp</option>
                <option>Facebook</option>
                <option>TikTok</option>
                <option>Other</option>
              </select>
            </div>
            <div>
              <label for="paymentStatus">Payment Status</label>
              <select id="paymentStatus">
                <option>Pending</option>
                <option>Partial</option>
                <option>Paid - Cash</option>
                <option>Paid - Transfer</option>
                <option>Paid - Card</option>
              </select>
            </div>
          </div>

          <div class="items-header">
            <h3>Items</h3>
            <button class="btn btn-outline" type="button" id="addItemBtn">+ Add Item</button>
          </div>
          <div id="items-container" class="items-container"></div>

          <div class="form-row two-col">
            <div>
              <label for="deliveryFee">Delivery Fee (JMD)</label>
              <input id="deliveryFee" type="number" min="0" step="0.01" value="0" />
            </div>
            <div class="summary-pill" id="summary">Subtotal: J$0.00 · Total: J$0.00</div>
          </div>

          <div class="form-row">
            <label for="notes">Notes / Delivery Info</label>
            <textarea id="notes" rows="3" placeholder="e.g. Deliver to Portmore - J$500 fee"></textarea>
          </div>

          <div class="action-stack">
            <button id="saveOrderBtn" class="btn btn-primary" type="submit">Save Order</button>
            <button id="cancelEditBtn" class="btn btn-muted hidden" type="button">Cancel Edit</button>
          </div>

          <p id="feedback" class="feedback"></p>
        </form>
      </section>

      <section class="panel panel-orders">
        <div class="panel-head">
          <h2>Saved Orders</h2>
          <button class="btn btn-teal" id="exportCsvBtn" type="button">Export CSV</button>
        </div>

        <p id="totalRevenue" class="revenue-line">Total Revenue: J$0.00 · Orders: 0</p>

        <div class="stats-grid">
          <article class="stat-card"><span>Today’s Revenue</span><strong id="todayRevenue">J$0.00</strong></article>
          <article class="stat-card"><span>Pending Payments</span><strong id="pendingPayments">0</strong></article>
          <article class="stat-card"><span>Top Platform</span><strong id="topPlatform">—</strong></article>
        </div>

        <div class="filters-grid">
          <input id="searchOrders" type="text" placeholder="Search customer, phone, item, notes..." />
          <select id="dateFilter">
            <option value="all">All Dates</option>
            <option value="today">Today</option>
            <option value="week">Last 7 Days</option>
            <option value="month">Last 30 Days</option>
          </select>
        </div>

        <div id="orders-list" class="orders-list"></div>
      </section>
    </main>
  </div>

  <div id="confirmModal" class="modal hidden" aria-hidden="true">
    <div class="modal-card">
      <h3>Delete Order</h3>
      <p id="confirmMessage">Are you sure you want to delete this order?</p>
      <div class="modal-actions">
        <button id="cancelDeleteBtn" class="btn btn-muted" type="button">Cancel</button>
        <button id="confirmDeleteBtn" class="btn btn-danger" type="button">Delete</button>
      </div>
    </div>
  </div>

  <div id="businessSettings" class="modal hidden" aria-hidden="true">
    <div class="modal-card settings-card">
      <div class="panel-head">
        <h3>Business Settings</h3>
        <button id="closeSettings" class="btn btn-muted" type="button">Close</button>
      </div>
      <p class="muted">This info appears on every receipt PDF.</p>

      <label for="bizName">Business Name</label>
      <input id="bizName" type="text" placeholder="Your Business Name" />

      <label for="bizEmail">Business Email</label>
      <input id="bizEmail" type="email" placeholder="business@example.com" />

      <label for="bizSocial">Business Social Handle (without @)</label>
      <input id="bizSocial" type="text" placeholder="yourhandle" />

      <label for="bizSocialPlatform">Social Platform</label>
      <select id="bizSocialPlatform">
        <option value="">Select platform</option>
        <option>Instagram</option>
        <option>TikTok</option>
        <option>X / Twitter</option>
        <option>Facebook</option>
        <option>Other</option>
      </select>

      <label for="bizAreaCode">WhatsApp / Contact Area Code</label>
      <input id="bizAreaCode" type="text" value="+1-876-" />

      <label for="bizPhone">WhatsApp / Contact (digits only)</label>
      <div class="phone-field">
        <span id="bizPhonePrefix" class="prefix">+1-876-</span>
        <input id="bizPhone" type="tel" class="with-prefix" maxlength="8" placeholder="XXX-XXXX" />
      </div>

      <label for="bizLogoUpload">Upload Logo (PNG/JPG)</label>
      <input id="bizLogoUpload" type="file" accept="image/*" />
      <img id="logoPreview" alt="Logo Preview" />

      <label for="bizNote">Extra Receipt Note</label>
      <textarea id="bizNote" rows="2" placeholder="Thank you for your order!"></textarea>

      <button id="saveBusinessBtn" class="btn btn-primary" type="button">Save Business Info</button>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
